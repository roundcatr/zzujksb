# 郑州大学健康状况上报平台自动填报脚本

仅用于郑州大学健康状况上报平台。

## 背景

自 2020 年初疫情发生以来，学校要求每天通过健康状况上报平台填报健康状况，至今已一年有余。之前因为没有保持运行状态的计算机，加之平台填报过程越来越简化，所以一直没有着手将此过程自动化。偶然间发现 iOS 内置的快捷指令可以手动构造 HTTP 请求，便产生了利用快捷指令并结合 iOS 的自动化功能实现自动打卡的想法。然而着手实施后经多次尝试发现由于 iOS 快捷指令对数据类型的支持不够完善，无法按照需要的方式处理服务器响应信息，因而作罢，遂将原先的想法写成了 Python 脚本，供有同样想法的同学交流讨论。

## 兼容性

测试平台：`Windows 10 x64`, `Ubuntu 20.04`, `Raspbian`

Python 版本：`3.x`

仅针对自己所使用的环境进行了测试，其他平台及版本未测试。

## 依赖

发送 HTTP 请求需要 `Requests` 模块，可通过 `pip list` 检查是否安装。

安装 `Requests` 模块：
```
> pip install requests
```

## 配置

填报信息存储于 `userinfo.json` 中，示例文件已上传，根据个人实际情况修改每一项的值即可。

省份代码及地市代码为当前所在省市的行政区划代码，脚本中未内置各省市行政区划代码，可通过搜索引擎检索得到。示例文件中的 `41` 表示河南，`4101` 表示郑州。

“健康码颜色”为绿色、黄色、红色对应英文单词的首字母。

“疫苗接种情况”从 1 到 4 分别代表已接种第一针剂、已接种第二针剂、尚未接种、因禁忌症无法接种。

## 使用

脚本会首先通过 `status` 文件判断是否已打卡成功，若未打卡则会进行打卡并在成功后向 `status` 文件写入 `submitted` 字符串。可通过 crond 定时任务或 Windows 计划任务等方式每日将 `status` 文件内容重置。

## **注意**

将配置文件修改为自己的正确信息每天运行一次即可，请勿尝试他人信息，否则服务器会要求填写图片验证码，本脚本不包含识别图片验证码的代码，多次尝试错误信息会导致无法填报，甚至导致设备被服务器拉黑。

<font color = #FF0000>仅用于个人健康状况及行程信息**未改变且长期稳定**时的自动填报！当信息发生改变时请**立即**停止使用脚本并**手动填报**信息，积极配合疫情防控措施！因滥用脚本造成的法律后果自行承担！！</font>